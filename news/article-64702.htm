<!DOCTYPE html>
<html xml:lang="zh-CN" lang="zh-CN">


<head>
        <link rel="canonical" href="https://todayclashnode.github.io/news/article-64702.htm" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Token验证JWT方法</title>
        <meta name="description" content="使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：   客户端使用用户名跟密码请求登录 服务端收到请求，去验证用户名与密码 验证成功后，服务端会签发一个 To" />
        <link rel="icon" href="/assets/website/img/todayclashnode/favicon.ico" type="image/x-icon"/>

    <meta name="author" content="TodayClashNode今日订阅站">
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://todayclashnode.github.io/news/article-64702.htm" />
    <meta property="og:site_name" content="TodayClashNode今日订阅站" />
    <meta property="og:title" content="Token验证JWT方法" />
    <meta property="og:image" content="https://todayclashnode.github.io/uploads/20240614/36a82a9aa6aed3e34b628f0033f5b100.webp" />
        <meta property="og:release_date" content="2025-02-28T06:56:51" />
    <meta property="og:updated_time" content="2025-02-28T06:56:51" />
        <meta property="og:description" content="使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：   客户端使用用户名跟密码请求登录 服务端收到请求，去验证用户名与密码 验证成功后，服务端会签发一个 To" />
        
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">

    <meta name="applicable-device" content="pc,mobile" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta name="robots" content="max-image-preview:large" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Token验证JWT方法">
    <meta name="format-detection" content="telephone=no">

    <link rel="dns-prefetch" href="https:/www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googleadservices.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
    <link rel="dns-prefetch" href="https://cm.g.doubleclick.net">
    
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="/assets/website/js/frontend/todayclashnode/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="/assets/website/js/frontend/todayclashnode/font-awesome/css/font-awesome.min.css">
    <!-- Google fonts - Poppins-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,600">
    <!-- Lightbox-->
    <link rel="stylesheet" href="/assets/website/js/frontend/todayclashnode/lightbox2/css/lightbox.css">
    <link rel="stylesheet" href="/assets/website/css/todayclashnode/fontastic.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="/assets/website/css/todayclashnode/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="/assets/website/css/todayclashnode/custom.css">
    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PB8VLG2G25"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PB8VLG2G25');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body data-page="detail">
        <!-- navbar-->
    <header class="header">
        <nav class="navbar navbar-expand-lg fixed-top">
            <div class="container">
                <a href="/" class="navbar-brand">
                                <span>
                    Today ClashNode                </span>
                                </a>

                <button type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right">Menu<i class="fa fa-bars ml-2"></i></button>
                <div id="navbarSupportedContent" class="collapse navbar-collapse">
                    <ul class="navbar-nav ml-auto">
                                                <!-- Link-->
                        <li class="nav-item"> <a href="/" class="nav-link">首页</a></li>
                                                <!-- Link-->
                        <li class="nav-item"> <a href="/free-nodes/" class="nav-link">免费节点</a></li>
                                                <!-- Link-->
                        <li class="nav-item"> <a href="/paid-subscribe/" class="nav-link">推荐机场</a></li>
                                                <!-- Link-->
                        <li class="nav-item"> <a href="/client.htm" class="nav-link">客户端</a></li>
                                                <!-- Link-->
                        <li class="nav-item"> <a href="/news/" class="nav-link">新闻资讯</a></li>
                                            </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section-->
    <section class="hero">
        <div class="container text-center">
            <h1>Token验证JWT方法</h1>
            <nav aria-label="breadcrumb" class="d-flex justify-content-center">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/" class="animsition-link">首页</a></li>
                    <li class="breadcrumb-item"><a href="/news/" class="animsition-link">新闻资讯</a></li>
                    <li aria-current="page" class="breadcrumb-item active">正文</li>
                </ol>
            </nav>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="row" id="list">
                <div class="col-md-9">
                                        <input type="hidden" id="share-website-info" data-name="" data-url="">
                  				  				  				<div id="content_views" class="markdown_views prism-atom-one-dark"> <h5><a id="_Token__0" rel="nofollow"></a>使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：</h5> <blockquote> <ol> <li>客户端使用用户名跟密码请求登录</li> <li>服务端收到请求，去验证用户名与密码</li> <li>验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端</li> <li>客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里</li> <li>客户端每次向服务端请求资源的时候需要带着服务端签发的 Token</li> <li>服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据</li> </ol> </blockquote> <h3><a id="JWT_9" rel="nofollow"></a>JWT验证</h3> <blockquote> <p>JWT，读作：<em>jot</em> ，表示：JSON Web Tokens</p> </blockquote> <p>JWT 标准的 Token 有三个部分：</p> <ul> <li>header（头部）</li> <li>payload（数据）</li> <li>signature（签名）</li> </ul> <p>中间用点分隔开，并且都会使用 Base64 编码，所以真正的 Token 看起来像这样：</p> <pre><code class="prism language-json">eyJhbGciOiJIUzI1NiJ9<span class="token punctuation">.</span>eyJpc3MiOiJuaW5naGFvLm5ldCIsImV4cCI6IjE0Mzg5NTU0NDUiLCJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlfQ<span class="token punctuation">.</span>SwyHTEx_RQppr97g4J5lKXtabJecpejuef8AqKYMAJc</code></pre> <h3><a id="Header_25" rel="nofollow"></a>Header</h3> <p>每个 JWT token 里面都有一个 header，也就是头部数据。里面包含了使用的算法，这个 JWT 是不是带签名的或者加密的。主要就是说明一下怎么处理这个 JWT token 。</p> <p>唯一在头部里面要包含的是<em>alg</em> 这个属性，如果是加密的 JWT，这个属性的值就是使用的签名或者解密用的算法。如果是未加密的 JWT，这个属性的值要设置成<em>none</em>。</p> <p>eg:</p> <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span><span class="token string">"alg"</span><span class="token punctuation">:</span><span class="token string">"HS256"</span><span class="token punctuation">}</span></code></pre> <p>意思是这个 JWT 用的算法是 HS256,在base64url编码之后变成</p> <pre><code class="prism language-json">eyJhbGciOiJIUzI1NiJ9</code></pre> <h3><a id="Payload_45" rel="nofollow"></a>Payload</h3> <p>Payload 里面是 Token 的具体内容，这些内容里面有一些是标准字段，你也可以添加其它需要的内容。</p> <ul> <li>iss：Issuer，发行者</li> <li>sub：Subject，主题</li> <li>aud：Audience，观众</li> <li>exp：Expiration time，过期时间</li> <li>nbf：Not before</li> <li>iat：Issued at，发行时间</li> <li>jti：JWT ID</li> </ul> <p>两个自定义的字段，一个是<em>name</em> ，还有一个是<em>admin</em> 。</p> <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span><span class="token string">"iss"</span><span class="token punctuation">:</span><span class="token string">"ninghao.net"</span><span class="token punctuation">,</span><span class="token string">"exp"</span><span class="token punctuation">:</span><span class="token string">"1438955445"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"wanghao"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span></code></pre> <p>使用 base64url 编码以后就变成了这个样子：</p> <pre><code class="prism language-json">eyJpc3MiOiJuaW5naGFvLm5ldCIsImV4cCI6IjE0Mzg5NTU0NDUiLCJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlfQ</code></pre> <h3><a id="Signature_74" rel="nofollow"></a>Signature</h3> <p>JWT 的最后一部分是 Signature ，这部分内容有三个部分，先是用 Base64 编码的<code>header.payload</code>，再用加密算法加密一下，加密的时候要放进去一个 Secret ，这个相当于是一个密码，这个密码秘密地存储在服务端。</p> <p>组成结构是这样子：</p> <ul> <li>header</li> <li>payload</li> <li>secret</li> </ul> <pre><code class="prism language-json"><span class="token keyword">const</span> encodedString<span class="token operator">=</span><span class="token function">base64UrlEncode</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"."</span><span class="token operator">+</span><span class="token function">base64UrlEncode</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token constant">HMACSHA256</span><span class="token punctuation">(</span>encodedString<span class="token punctuation">,</span><span class="token string">'secret'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>处理完成以后看起来像这样：</p> <pre><code class="prism language-json">SwyHTEx_RQppr97g4J5lKXtabJecpejuef8AqKYMAJc</code></pre> <p>最后这个在服务端生成并且要发送给客户端的 Token 看起来像这样：(由以上三部分组成)</p> <pre><code class="prism language-json">eyJhbGciOiJIUzI1NiJ9<span class="token punctuation">.</span>eyJpc3MiOiJuaW5naGFvLm5ldCIsImV4cCI6IjE0Mzg5NTU0NDUiLCJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlfQ<span class="token punctuation">.</span>SwyHTEx_RQppr97g4J5lKXtabJecpejuef8AqKYMAJc</code></pre> <p>客户端收到这个 Token 以后把它存储下来，下回向服务端发送请求的时候就带着这个 Token 。服务端收到这个 Token ，然后进行验证，通过以后就会返回给客户端想要的资源。</p> <h3><a id="_103" rel="nofollow"></a>准备项目</h3> <p>准备一个简单的 Node.js 项目：</p> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj<span class="token operator">&gt;</span>cd desktop<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop<span class="token operator">&gt;</span>mkdir jwt<span class="token operator">-</span>demo<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop<span class="token operator">&gt;</span>cd jwt<span class="token operator">-</span>demo<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>npm init<span class="token operator">-</span>y</code></pre> <p>安装签发与验证 JWT 的功能包，我用的叫<a href="http://www.m6000.cn/wp-content/themes/begin%20lts/inc/go.php?url=https://github.com/auth0/node-jsonwebtoken"  rel="nofollow"><em>jsonwebtoken</em></a>，在项目里安装一下这个包：</p> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>npm install jsonwebtoken</code></pre> <h3><a id="_JWT_123" rel="nofollow"></a>签发 JWT</h3> <p>在项目里随便添加一个 .js 文件，比如<em>index.js</em>，在文件里添加下面这些代码：</p> <pre><code class="prism language-js"><span class="token keyword">const</span> jwt<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span><span class="token comment">// Token 数据</span><span class="token keyword">const</span> payload<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>   name<span class="token punctuation">:</span><span class="token string">'wanghao'</span><span class="token punctuation">,</span>   admin<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token comment">// 密钥</span><span class="token keyword">const</span> secret<span class="token operator">=</span><span class="token string">'ILOVENINGHAO'</span><span class="token comment">// 签发 Token</span><span class="token keyword">const</span> token<span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">,</span> secret<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span> expiresIn<span class="token punctuation">:</span><span class="token string">'1day'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 输出签发的 Token</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span></code></pre> <p>非常简单，就是用了刚刚为项目安装的<code>jsonwebtoken</code> 里面提供的<code>jwt.sign</code> 功能，去签发一个 token。这个<code>sign</code>方法需要三个参数：</p> <ol> <li><em>playload</em>：签发的 token 里面要包含的一些数据。</li> <li><em>secret</em>：签发 token 用的密钥，在验证 token 的时候同样需要用到这个密钥。</li> <li><em>options</em>：一些其它的选项。</li> </ol> <p>在命令行下面，用<em>node</em> 命令，执行一下项目里的<em>index.js</em> 这个文件（<em>node index.js</em>），会输出应用签发的<em>token</em>：</p> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>node index<span class="token punctuation">.</span>js</code></pre> <pre><code class="prism language-json">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token punctuation">.</span>eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE1MjkwMzM5MDYsImV4cCI6MTUyOTEyMDMwNn0<span class="token punctuation">.</span>DctA2QlUCrM6wLWkIO78wBVN0NLpjoIq4T5B_2WJ<span class="token operator">-</span><span class="token constant">PU</span></code></pre> <p>上面的 Token 内容并没有加密，所以如果用一些 JWT 解码功能，可以看到 Token 里面包含的内容，内容由三个部分组成，像这样：</p> <pre><code class="prism language-json"><span class="token comment">// header</span><span class="token punctuation">{<!-- --></span><span class="token string">"alg"</span><span class="token punctuation">:</span><span class="token string">"HS256"</span><span class="token punctuation">,</span><span class="token string">"typ"</span><span class="token punctuation">:</span><span class="token string">"JWT"</span><span class="token punctuation">}</span><span class="token comment">// payload</span><span class="token punctuation">{<!-- --></span><span class="token string">"admin"</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string">"iat"</span><span class="token punctuation">:</span><span class="token number">1529033906</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"wanghao"</span><span class="token punctuation">,</span><span class="token string">"exp"</span><span class="token punctuation">:</span><span class="token number">1529120306</span><span class="token punctuation">}</span><span class="token comment">// signature</span> DctA2QlUCrM6wLWkIO78wBVN0NLpjoIq4T5B_2WJ<span class="token operator">-</span><span class="token constant">PU</span></code></pre> <h3><a id="_JWT_183" rel="nofollow"></a>验证 JWT</h3> <p>打开项目的 index.js 文件，里面添加几行代码，变成下面的样子：</p> <pre><code class="prism language-js"><span class="token keyword">const</span> jwt<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span><span class="token comment">// Token 数据</span><span class="token keyword">const</span> payload<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>   name<span class="token punctuation">:</span><span class="token string">'wanghao'</span><span class="token punctuation">,</span>   admin<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token comment">// 密钥</span><span class="token keyword">const</span> secret<span class="token operator">=</span><span class="token string">'ILOVENINGHAO'</span><span class="token comment">// 签发 Token</span><span class="token keyword">const</span> token<span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">,</span> secret<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span> expiresIn<span class="token punctuation">:</span><span class="token string">'1day'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 输出签发的 Token</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token comment">// 验证 Token</span> jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> secret<span class="token punctuation">,</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> decoded<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span><span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">}</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>decoded<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre> <p><code>把要验证的 Token 数据，还有签发这个 Token 的时候用的那个密钥告诉 *verify* 这个方法，在一个回调里面有两个参数，*error* 表示错误，*decoded* 是解码之后的 Token 数据。</code></p> <p>执行：</p> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>node index<span class="token punctuation">.</span>js</code></pre> <p>输出：</p> <pre><code class="prism language-json">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token punctuation">.</span>eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE1MjkwMzQ3MzMsImV4cCI6MTUyOTEyMTEzM30<span class="token punctuation">.</span>swXojmu7VimFu3BoIgAxxpmm2J05dvD0HT3yu10vuqU<span class="token punctuation">{<!-- --></span> name<span class="token punctuation">:</span><span class="token string">'wanghao'</span><span class="token punctuation">,</span> admin<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> iat<span class="token punctuation">:</span><span class="token number">1529035386</span><span class="token punctuation">,</span> exp<span class="token punctuation">:</span><span class="token number">1529121786</span><span class="token punctuation">}</span></code></pre> <p>若输出：</p> <pre><code class="prism language-js">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token punctuation">.</span>eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE1MjkwMzQ3MzMsImV4cCI6MTUyOTEyMTEzM30<span class="token punctuation">.</span>swXojmu7VimFu3BoIgAxxpmm2J05dvD0HT3yu10vuqU  invalid signature</code></pre> <p>则表示签名不对，即<em>verify</em> 这个方法的参数是错误的。</p> <h3><a id="_244" rel="nofollow"></a>使用方法</h3> <h4><a id="1_node_246" rel="nofollow"></a>1 新建一个node项目，并为其安装环境</h4> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj<span class="token operator">&gt;</span>cd desktop<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop<span class="token operator">&gt;</span>mkdir jwt<span class="token operator">-</span>demo<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop<span class="token operator">&gt;</span>cd jwt<span class="token operator">-</span>demo<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>npm init<span class="token operator">-</span>y</code></pre> <p>执行结果：</p> <pre><code class="prism language-js">Wrote to<span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo\<span class="token keyword">package</span><span class="token punctuation">.</span>json<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"jwt-demo"</span><span class="token punctuation">,</span><span class="token string">"version"</span><span class="token punctuation">:</span><span class="token string">"1.0.0"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"main"</span><span class="token punctuation">:</span><span class="token string">"index.js"</span><span class="token punctuation">,</span><span class="token string">"scripts"</span><span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"test"</span><span class="token punctuation">:</span><span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"keywords"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">"author"</span><span class="token punctuation">:</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"license"</span><span class="token punctuation">:</span><span class="token string">"ISC"</span><span class="token punctuation">}</span></code></pre> <h4><a id="2_jsonwebtoken_277" rel="nofollow"></a>2 为项目安装<code>jsonwebtoken</code>环境</h4> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>npm install jsonwebtoken</code></pre> <p>结果：</p> <pre><code>npm notice created a lockfile as package-lock.json. You should commit this file. npm WARN jwt-demo@1.0.0 No description npm WARN jwt-demo@1.0.0 No repository field.  + jsonwebtoken@8.5.1 added 15 packages from 10 contributors in 1.194s  1 package is looking for funding   run `npm fund` for details</code></pre> <h4><a id="3__js___297" rel="nofollow"></a>3 新建一个 js 文件 ，并在其中添加基础的框架代码</h4> <pre><code class="prism language-js"><span class="token keyword">const</span> jwt<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span><span class="token comment">// Token 数据</span><span class="token keyword">const</span> payload<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>   name<span class="token punctuation">:</span><span class="token string">'wanghao'</span><span class="token punctuation">,</span>   admin<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token comment">// 密钥</span><span class="token keyword">const</span> secret<span class="token operator">=</span><span class="token string">'ILOVENINGHAO'</span><span class="token comment">// 签发 Token</span><span class="token keyword">const</span> token<span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>payload<span class="token punctuation">,</span> secret<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span> expiresIn<span class="token punctuation">:</span><span class="token string">'1day'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 输出签发的 Token</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token comment">// 验证 Token</span> jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> secret<span class="token punctuation">,</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> decoded<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span><span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">}</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>decoded<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre> <blockquote> <p>注意两个函数：</p> <p><code>sign</code>：需要三个参数，分别是payload，secret ， 和<em>options</em> ，表示一些其他选项</p> <p><code>verify</code>：需要三个参数，分别是携带信息的token ，密钥 secret ， 和一个回调的方法，这个方法需要由两个参数，分别是 error ，返回错误信息，另一个是decoded ， 返回该token解码的结果</p> </blockquote> <h4><a id="4_Token_334" rel="nofollow"></a>4 在命令窗口下验证该Token</h4> <pre><code class="prism language-js"><span class="token constant">C</span><span class="token punctuation">:</span>\Users\bnkj\Desktop\jwt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>node index<span class="token punctuation">.</span>js</code></pre> <p>结果：</p> <pre><code class="prism language-json">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token punctuation">.</span>eyJuYW1lIjoid2FuZ2hhbyIsImFkbWluIjp0cnVlLCJpYXQiOjE2MDg0Njk5OTQsImV4cCI6MTYwODU1NjM5NH0<span class="token punctuation">.</span><span class="token number">7</span>Mi8WrHAv0fWZnLV6DlkPqK_ExQ4f09Zrs8eiVzXRQs<span class="token punctuation">{<!-- --></span> name<span class="token punctuation">:</span><span class="token string">'wanghao'</span><span class="token punctuation">,</span> admin<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> iat<span class="token punctuation">:</span><span class="token number">1608469994</span><span class="token punctuation">,</span> exp<span class="token punctuation">:</span><span class="token number">1608556394</span><span class="token punctuation">}</span></code></pre> <h3><a id="_352" rel="nofollow"></a>在项目中的使用方法</h3> <blockquote> <p>空 ，后续更新</p> </blockquote> </div> 			                <div class="clearfix"></div>
                <div class="col-md-12 mt-5">
                                        <p>上一个：<a href="/news/article-64088.htm">宠物粮食代加工厂家有哪些 宠物粮食代加工厂家有哪些地方</a></p>
                                        <p>下一个：<a href="/news/article-64703.htm">医院动物实验中心干什么（医院动物实验室）</a></p>
                                    </div>
                                </div>
                <div class="col-md-3">
                    <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/free-nodes/2024-11-17-free-high-speed-nodes.htm" title="「11月17日」最高速度21M/S，2024年V2ray/Clash/SSR/Shadowrocket每天更新免费机场订阅链接">「11月17日」最高速度21M/S，2024年V2ray/Clash/SSR/Shadowrocket每天更新免费机场订阅链接</a></li>
                        <li class="py-2"><a href="/news/article-56537.htm" title="宠物疫苗编号 宠物疫苗编号查询网站">宠物疫苗编号 宠物疫苗编号查询网站</a></li>
                        <li class="py-2"><a href="/news/article-21638.htm" title="上海宠物中心领养地址查询（上海宠物中心领养地址查询）">上海宠物中心领养地址查询（上海宠物中心领养地址查询）</a></li>
                        <li class="py-2"><a href="/free-nodes/2025-1-4-clash-v2ray-ss-ssr.htm" title="「1月4日」最高速度19.1M/S，2025年Clash/Shadowrocket/SSR/V2ray每天更新免费机场订阅链接">「1月4日」最高速度19.1M/S，2025年Clash/Shadowrocket/SSR/V2ray每天更新免费机场订阅链接</a></li>
                        <li class="py-2"><a href="/news/article-23019.htm" title="学宠物医生上什么专科学校好（学宠物医生有前景吗?）">学宠物医生上什么专科学校好（学宠物医生有前景吗?）</a></li>
                        <li class="py-2"><a href="/news/article-19816.htm" title=".NET混合开发解决方案4 WebView2的线程模型">.NET混合开发解决方案4 WebView2的线程模型</a></li>
                        <li class="py-2"><a href="/free-nodes/2025-1-18-free-shadowrocket-node.htm" title="「1月18日」最高速度20M/S，2025年Shadowrocket/SSR/V2ray/Clash每天更新免费机场订阅链接">「1月18日」最高速度20M/S，2025年Shadowrocket/SSR/V2ray/Clash每天更新免费机场订阅链接</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-11-free-v2ray.htm" title="「12月11日」最高速度21.8M/S，2024年SSR/Clash/Shadowrocket/V2ray每天更新免费机场订阅链接">「12月11日」最高速度21.8M/S，2024年SSR/Clash/Shadowrocket/V2ray每天更新免费机场订阅链接</a></li>
                        <li class="py-2"><a href="/news/article-52696.htm" title="Spring 4 中使用 Scheduled 任务调度">Spring 4 中使用 Scheduled 任务调度</a></li>
                        <li class="py-2"><a href="/free-nodes/2024-12-21-clash-v2ray-ss-ssr.htm" title="「12月21日」最高速度22.2M/S，2024年Shadowrocket/Clash/SSR/V2ray每天更新免费机场订阅链接">「12月21日」最高速度22.2M/S，2024年Shadowrocket/Clash/SSR/V2ray每天更新免费机场订阅链接</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">6</span> <a href="/date/2025-03/" title="2025-03 归档">2025-03</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">84</span> <a href="/date/2025-02/" title="2025-02 归档">2025-02</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">93</span> <a href="/date/2025-01/" title="2025-01 归档">2025-01</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">93</span> <a href="/date/2024-12/" title="2024-12 归档">2024-12</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">30</span> <a href="/date/2024-11/" title="2024-11 归档">2024-11</a></h4>
            </li>
                    </ul>
    </div>
</div>



                </div>
            </div>
        </div>
    </section>
        <footer class="main-footer">
        <div class="copyrights">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 text-center text-lg-left">
                            <p>
                                <a href="/">首页</a> | 
                                <a href="/free-node/">免费节点</a> | 
                                <a href="/news/">新闻资讯</a> |
                                <a href="/about-us.htm">关于我们</a> |
                                <a href="/disclaimer.htm">免责申明</a> |
                                <a href="/privacy.htm">隐私申明</a> |
                                <a href="/sitemap.xml">网站地图</a>
                            </p>
                        <p class="copyrights-text mb-3 mb-lg-0">
                          TodayClashNode今日订阅站 版权所有 Powered by WordPress
                        </p>
                    </div>
                    <div class="col-lg-6 text-center text-lg-right">
                        <ul class="list-inline social mb-0">
                            <li class="list-inline-item"><a href="#" class="social-link"><i class="fa fa-facebook"></i></a><a href="#" class="social-link"><i class="fa fa-twitter"></i></a><a href="#" class="social-link"><i class="fa fa-youtube-play"></i></a><a href="#" class="social-link"><i class="fa fa-vimeo"></i></a><a href="#" class="social-link"><i class="fa fa-pinterest"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- JavaScript files-->
    <script src="/assets/website/js/frontend/todayclashnode/jquery/jquery.min.js"></script>
    <script src="/assets/website/js/frontend/todayclashnode/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/website/js/frontend/todayclashnode/jquery.cookie/jquery.cookie.js"> </script>
    <script src="/assets/website/js/frontend/todayclashnode/lightbox2/js/lightbox.js"></script>
    <script src="/assets/website/js/frontend/todayclashnode/front.js"></script>
    <script src="https://www.freeclashnode.com/assets/js/frontend/invite-url.js"></script>
    <script src="/assets/website/js/frontend/G.js"></script>
</body>

</html>